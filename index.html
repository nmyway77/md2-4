<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>êµê³¼ì„œì‹ ë¬¸ì¥ ë°°ì—´ì˜ì‘ ì—°ìŠµ</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 24px; background: #f6f8fa; }
    .header {
      background: #3b82f6; color: #fff; padding: 28px 0 18px 0; text-align: center;
      font-size: 2rem; letter-spacing: 1px; font-weight: bold; box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      margin-bottom: 24px; border-radius: 0 0 20px 20px;
    }
    .lesson-title { font-size:1.35em; margin-bottom: 28px; color: #1e293b; font-weight: bold; text-align: center;}
    .problem-block { background: #fff; margin-bottom: 32px; padding: 18px; border-radius: 16px; box-shadow: 0 2px 8px #0002;}
    .kor { font-size:1.12em; font-weight: bold; color: #2563eb; margin-bottom:12px;}
    .sortable { display: flex; flex-wrap: wrap; min-height: 48px; gap: 8px; margin-bottom: 10px; }
    .word { border: none; border-radius: 8px; padding: 8px 16px; font-size: 1em; cursor: pointer; }
    .answer .word { background: #e0e7ef; color: #1e293b; font-weight: bold; }
    .pool .word { background: #2563eb; color: #fff; font-weight: bold; }
    .pool .word:hover { background: #1d4ed8; }
    .ctrl { margin-bottom: 8px;}
    .ctrl button { padding: 5px 15px; font-size: 0.95em; border-radius: 8px; border: none; background: #3b82f6; color: #fff; cursor: pointer; margin-right: 8px; margin-bottom: 5px;}
    .ctrl button:active { background: #2563eb; }
    .result { font-size: 1.05em; font-weight: bold; color: #d97706; margin-top: 6px; min-height: 24px;}
    #lesson-nav { margin: 40px 0 10px 0; text-align: center;}
    #lesson-nav button { margin: 0 18px; padding: 8px 28px;}
  </style>
</head>
<body>
  <div class="header">êµê³¼ì„œì‹ ì˜ì–´ ë¬¸ì¥ ë°°ì—´ ì—°ìŠµ</div>
  <div class="lesson-title" id="lesson-title"></div>
  <div id="lesson-container"></div>
  <div id="lesson-nav">
    <button onclick="prevLesson()">ì´ì „ ê³¼</button>
    <span id="lesson-progress"></span>
    <button onclick="nextLesson()">ë‹¤ìŒ ê³¼</button>
  </div>
  <script>
    // 10ê³¼ ê¸°ë³¸ êµ¬ì¡° ìƒ˜í”Œ! (ê° 2ë¬¸ì¥, í•„ìš”ì‹œ problems ë°°ì—´ì— ë¬¸ì¥ ì¶”ê°€/ìˆ˜ì • ê°€ëŠ¥)
    const lessons = [
      {
        title: "Lesson 1 - Go-Kart Race",
        problems: [
          {
            kor: "ê³ ì¹´íŠ¸ ê²½ê¸° íŠ¸ë™ì— ì‹ ì´ ë‚˜ì„œ ì‘ì›í•˜ëŠ” ë§ì€ ì‚¬ëŒë“¤ì´ ìˆë‹¤.",
            eng: ["At", "the", "go-kart", "race", "track,", "there", "are", "many", "people", "who", "are", "cheering", "excitedly."],
          },
          {
            kor: "ì‹œë„ëŸ¬ìš´ ì—”ì§„ ì†ŒìŒì„ ë‚´ê³  ìˆëŠ” ì¹´íŠ¸ë“¤ì´ ëŒ€ê¸°í•˜ê³  ìˆë‹¤.",
            eng: ["The", "karts", "that", "are", "making", "loud", "engine", "noises", "are", "waiting."],
          },
        ]
      },
      {
        title: "Lesson 2 - The Last Lap",
        problems: [
          {
            kor: "MaxëŠ” ì—´ ë°”í€´ë¥¼ ë§ˆì¹˜ê³  ì´ì œ ë‹¤ì„¯ ë°”í€´ê°€ ë” ë‚¨ì•˜ë‹¤.",
            eng: ["Max", "completes", "the", "tenth", "lap", "and", "now", "has", "five", "more", "laps", "to", "go."],
          },
          {
            kor: "MaxëŠ” ë°”ë¡œ ë‹¿ì„ ë“¯í•œ ê±°ë¦¬ ì•ì— ìˆëŠ” Simonì˜ ì¹´íŠ¸ë¥¼ ë³¸ë‹¤.",
            eng: ["Max", "sees", "Simon's", "kart", "ahead,", "just", "out", "of", "Max's", "reach."],
          },
        ]
      },
      {
        title: "Lesson 3 - A Close Finish",
        problems: [
          {
            kor: "ê²°ìŠ¹ì„ ì´ ì ì  ê°€ê¹Œì›Œì§€ê³ , ê´€ì¤‘ë“¤ì˜ í™˜í˜¸ì„±ì€ ì ì  ë” ì»¤ì§„ë‹¤.",
            eng: ["The", "finish", "line", "is", "getting", "closer,", "and", "the", "cheering", "from", "the", "crowd", "is", "getting", "louder."],
          },
          {
            kor: "'ë‚˜ëŠ” í•  ìˆ˜ ìˆì–´!' MaxëŠ” í°ì†Œë¦¬ë¡œ ì™¸ì¹œë‹¤.",
            eng: ["\"I", "can", "do", "it!\"", "Max", "says", "loudly."],
          },
        ]
      },
      {
        title: "Lesson 4 - Max's Effort",
        problems: [
          {
            kor: "Maxê°€ ìì‹ ì´ 2ë“±ìœ¼ë¡œ ë“¤ì–´ì™”ë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹«ì ê·¸ì˜ ëˆˆì€ ëˆˆë¬¼ë¡œ ê°€ë“ ì°¬ë‹¤.",
            eng: ["Max's", "eyes", "are", "filled", "with", "tears", "as", "he", "finds", "out", "that", "he", "came", "in", "second."],
          },
          {
            kor: "\"ìš¸ í•„ìš” ì—†ë‹¨ë‹¤, ì–˜ì•¼.\" ì–´ë–¤ ë‚¨ìê°€ ë§í•œë‹¤.",
            eng: ["\"No", "need", "for", "tears,", "kid,\"", "says", "a", "man's", "voice."],
          },
        ]
      },
      {
        title: "Lesson 5 - A Surprise",
        problems: [
          {
            kor: "ê·¸ ì•ì— ì„œ ìˆëŠ” ë‚¨ìëŠ” L. J. Richardsì´ë‹¤!",
            eng: ["The", "man", "who", "is", "standing", "in", "front", "of", "him", "is", "L.", "J.", "Richards!"],
          },
          {
            kor: "\"ê°ì‚¬í•©ë‹ˆë‹¤ë§Œ ì €ëŠ” ìš°ìŠ¹ìê°€ ì•„ë‹ˆì—ìš”.\" Maxê°€ ë§í•œë‹¤.",
            eng: ["\"Thank", "you,", "but", "I'm", "not", "the", "winner,\"", "says", "Max."],
          },
        ]
      },
      {
        title: "Lesson 6 - Encouragement",
        problems: [
          {
            kor: "\"ì •ë§ ì•„ìŠ¬ì•„ìŠ¬í•œ ê²½ê¸°ì˜€ì–´. ë„ˆëŠ” ë¹„ë¡ ê²½ê¸°ì—ì„œ ìš°ìŠ¹í•˜ì§€ ëª»í–ˆì§€ë§Œ ìµœì„ ì„ ë‹¤í–ˆì–ë‹ˆ. ì¤‘ìš”í•œ ê²ƒì€ ë°”ë¡œ ê·¸ê±°ë€ë‹¤!\" L. J. Richardsê°€ ë§í•œë‹¤.",
            eng: ["\"It", "was", "a", "real", "close", "race.", "Even", "though", "you", "didn't", "win", "the", "race,", "you", "did", "your", "best.", "That's", "the", "thing", "that", "counts!\"", "says", "L.", "J.", "Richards."],
          },
          {
            kor: "'ë‚´ê°€ ìµœì„ ì„ ë‹¤í–ˆì—ˆë‚˜?' MaxëŠ” ìƒê°í•œë‹¤.",
            eng: ["'Did", "I", "do", "my", "best?'", "thinks", "Max."],
          },
        ]
      },
      {
        title: "Lesson 7 - After the Race",
        problems: [
          {
            kor: "ì ì‹œ í›„ì— ê·¸ëŠ” ë¯¸ì†Œë¥¼ ì§“ëŠ”ë‹¤.",
            eng: ["After", "a", "moment,", "he", "smiles."],
          },
          {
            kor: "\"ë„¤, ì €ëŠ” ìµœì„ ì„ ë‹¤í–ˆë‹¤ê³  ìƒê°í•´ìš”.\"",
            eng: ["\"Yeah,", "I", "guess", "I", "did.\""],
          },
        ]
      },
      {
        title: "Lesson 8 - The Winner",
        problems: [
          {
            kor: "ì¹´íŠ¸ë“¤ì´ ê¸‰íˆ ë‹¬ë ¤ ê²°ìŠ¹ì„ ì„ ì§€ë‚˜ê°„ë‹¤.",
            eng: ["The", "karts", "rush", "across", "the", "finish", "line."],
          },
          {
            kor: "ëˆ„ê°€ ìš°ìŠ¹ìì¼ê¹Œ?",
            eng: ["Who", "is", "the", "winner?"],
          },
        ]
      },
      {
        title: "Lesson 9 - New Friends",
        problems: [
          {
            kor: "Maxì™€ Simonì€ ì„œë¡œë¥¼ ì¶•í•˜í•´ì¤€ë‹¤.",
            eng: ["Max", "and", "Simon", "congratulate", "each", "other."],
          },
          {
            kor: "ë‘ ì‚¬ëŒì€ í•¨ê»˜ ì‚¬ì§„ì„ ì°ëŠ”ë‹¤.",
            eng: ["They", "take", "a", "picture", "together."],
          },
        ]
      },
      {
        title: "Lesson 10 - Looking Ahead",
        problems: [
          {
            kor: "MaxëŠ” ë‹¤ìŒ ê²½ê¸°ë¥¼ ê¸°ëŒ€í•œë‹¤.",
            eng: ["Max", "looks", "forward", "to", "the", "next", "race."],
          },
          {
            kor: "ê·¸ëŠ” ë‹¤ì‹œ ë„ì „í•  ì¤€ë¹„ê°€ ë˜ì–´ ìˆë‹¤.",
            eng: ["He", "is", "ready", "to", "try", "again."],
          },
        ]
      }
    ];
    // -----------------------
    let lessonIdx = 0;
    let problemStates = []; // [{ chosen:[], pool:[], result:"" }, ...] - ë¬¸ì œë³„ë¡œ ê´€ë¦¬

    function shuffle(arr) { return arr.slice().sort(() => Math.random() - 0.5); }

    function renderLesson() {
      const lesson = lessons[lessonIdx];
      document.getElementById("lesson-title").textContent = lesson.title;
      document.getElementById("lesson-progress").textContent = (lessonIdx+1) + " / " + lessons.length;
      const container = document.getElementById("lesson-container");
      container.innerHTML = "";

      lesson.problems.forEach((prob, i) => {
        // ë¬¸ì œë³„ state
        let state = problemStates[i];
        if (!state) {
          state = { chosen: [], pool: shuffle(prob.eng), result: "" };
          problemStates[i] = state;
        }
        // ë¬¸ì œë¸”ë¡
        const pb = document.createElement("div");
        pb.className = "problem-block";
        pb.innerHTML = `
          <div class="kor">${i+1}. ${prob.kor}</div>
          <div class="sortable answer" id="ans-${i}">
            ${state.chosen.map((w, idx) => `<button class="word" onclick="removeWord(${i},${idx})">${w}</button>`).join('')}
          </div>
          <div class="sortable pool" id="pool-${i}">
            ${state.pool.map((w, idx) => `<button class="word" onclick="chooseWord(${i},${idx})">${w}</button>`).join('')}
          </div>
          <div class="ctrl">
            <button onclick="undoLastWord(${i})">ë˜ëŒë¦¬ê¸°</button>
            <button onclick="resetSentence(${i})">ì´ˆê¸°í™”</button>
            <button onclick="checkAnswer(${i})">ì •ë‹µ í™•ì¸</button>
          </div>
          <div class="result" id="result-${i}">${state.result||""}</div>
        `;
        container.appendChild(pb);
      });
    }

    function chooseWord(pIdx, wIdx) {
      let state = problemStates[pIdx];
      state.chosen.push(state.pool[wIdx]);
      state.pool.splice(wIdx, 1);
      state.result = "";
      renderLesson();
    }
    function removeWord(pIdx, wIdx) {
      let state = problemStates[pIdx];
      state.pool.push(state.chosen[wIdx]);
      state.chosen.splice(wIdx, 1);
      state.result = "";
      renderLesson();
    }
    function undoLastWord(pIdx) {
      let state = problemStates[pIdx];
      if (state.chosen.length > 0) {
        state.pool.push(state.chosen.pop());
        state.result = "";
        renderLesson();
      }
    }
    function resetSentence(pIdx) {
      let prob = lessons[lessonIdx].problems[pIdx];
      problemStates[pIdx] = { chosen: [], pool: shuffle(prob.eng), result: "" };
      renderLesson();
    }
    function checkAnswer(pIdx) {
      let prob = lessons[lessonIdx].problems[pIdx];
      let state = problemStates[pIdx];
      if (state.chosen.join(' ') === prob.eng.join(' ')) {
        state.result = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
      } else {
        state.result = "ì•„ì‰½ì§€ë§Œ ì •ë‹µì´ ì•„ë‹™ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.";
      }
      renderLesson();
    }
    function nextLesson() {
      if (lessonIdx < lessons.length-1) {
        lessonIdx++;
        problemStates = []; // reset state for new lesson
        renderLesson();
      }
    }
    function prevLesson() {
      if (lessonIdx > 0) {
        lessonIdx--;
        problemStates = [];
        renderLesson();
      }
    }
    // ìµœì´ˆ í‘œì‹œ
    renderLesson();
    // ì „ì—­ìœ¼ë¡œ í•¨ìˆ˜ ê³µê°œ(HTMLì—ì„œ í˜¸ì¶œ)
    window.chooseWord = chooseWord;
    window.removeWord = removeWord;
    window.undoLastWord = undoLastWord;
    window.resetSentence = resetSentence;
    window.checkAnswer = checkAnswer;
    window.nextLesson = nextLesson;
    window.prevLesson = prevLesson;
  </script>
</body>
</html>


